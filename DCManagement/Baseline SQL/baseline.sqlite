CREATE TABLE Team(
    TeamID INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
    TeamLead INTEGER NULL,
    PrimaryLocation INTEGER NULL,
    FillIfNoLead BOOLEAN NOT NULL,
    Active BOOLEAN NOT NULL,
    TeamName TEXT NOT NULL
);

CREATE TABLE LocationSlot(
    SlotID INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
    LocationID INTEGER NOT NULL,
    SlotName TEXT NOT NULL,
    Active BOOLEAN NOT NULL
);

CREATE TABLE Person(
    PersonID INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
    FirstName TEXT NOT NULL,
    LastName TEXT NOT NULL,
    DateOfBirth DATETIME NULL,
    IsActive BOOLEAN NOT NULL
);

CREATE TABLE Assignment(
    AssignmentID INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
    PersonID INTEGER NOT NULL,
    Task TEXT NOT NULL,
    StartDate DATETIME NULL,
    EndDate DATETIME NULL,
    IsCompleted BOOLEAN NOT NULL
);

CREATE TABLE Floorplan(
    FloorplanID INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
    Name TEXT NOT NULL,
    Description TEXT NULL,
    CreatedDate DATETIME NOT NULL,
    IsActive BOOLEAN NOT NULL
);

CREATE TABLE Location(
    LocationID INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
    FloorplanID INTEGER NOT NULL,
    Name TEXT NOT NULL,
    Description TEXT NULL,
    XCoordinate REAL NOT NULL,
    YCoordinate REAL NOT NULL,
    IsAccessible BOOLEAN NOT NULL
);

CREATE TABLE PersonSlot(
    PersonSlotID INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
    PersonID INTEGER NOT NULL,
    SlotID INTEGER NOT NULL,
    AssignmentDate DATETIME NOT NULL,
    IsActive BOOLEAN NOT NULL
);

CREATE TABLE Skill(
    SkillID INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
    TypeName TEXT NOT NULL,
    Description TEXT NULL,
    IsActive BOOLEAN NOT NULL
);

CREATE TABLE Unavailability(
    UnavailabilityID INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
    PersonID INTEGER NOT NULL,
    StartDate DATETIME NOT NULL,
    EndDate DATETIME NOT NULL,
    Reason TEXT NULL,
    IsActive BOOLEAN NOT NULL
);
PRAGMA foreign_keys = ON; 
ALTER TABLE Assignment ADD FOREIGN KEY (PersonID) REFERENCES Person(PersonID);
ALTER TABLE Assignment ADD FOREIGN KEY (TeamID) REFERENCES Team(TeamID);
ALTER TABLE LocationSlot ADD FOREIGN KEY (Skill) REFERENCES Skill(SkillID);
ALTER TABLE LocationSlot ADD FOREIGN KEY (TeamID) REFERENCES Team(TeamID);
ALTER TABLE Person ADD FOREIGN KEY (TeamID) REFERENCES Team(TeamID);
ALTER TABLE Team ADD FOREIGN KEY (PrimaryLocation) REFERENCES Location(LocID);
ALTER TABLE Team ADD FOREIGN KEY (TeamLead) REFERENCES Person(PersonID);